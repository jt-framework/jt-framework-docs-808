import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as a,a as t}from"./app-cuoTE0Qt.js";const p={},c=t(`<h1 id="报文构建器" tabindex="-1"><a class="header-anchor" href="#报文构建器"><span>报文构建器</span></a></h1><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>hylexus<span class="token punctuation">.</span>jt<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">JtProtocolConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>hylexus<span class="token punctuation">.</span>jt<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">.</span></span><span class="token class-name">BuiltinJt808MsgType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>hylexus<span class="token punctuation">.</span>jt<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">HexStringUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">Charset</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Jt808MsgBuilderTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Charset</span> <span class="token constant">CHARSET</span> <span class="token operator">=</span> <span class="token class-name">JtProtocolConstant</span><span class="token punctuation">.</span><span class="token constant">JT_808_STRING_ENCODING</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Jt808MsgBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">Jt808MsgBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// 消息头</span>
                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span>msgHeaderSpecBuilder <span class="token operator">-&gt;</span> msgHeaderSpecBuilder
                        <span class="token comment">// 消息ID</span>
                        <span class="token punctuation">.</span><span class="token function">withMsgId</span><span class="token punctuation">(</span><span class="token class-name">BuiltinJt808MsgType</span><span class="token punctuation">.</span><span class="token constant">CLIENT_REGISTER</span><span class="token punctuation">)</span>
                        <span class="token comment">// 消息体属性(消息体长度自动计算)</span>
                        <span class="token punctuation">.</span><span class="token function">withMsgBodyPropsSpec</span><span class="token punctuation">(</span>msgBodyPropsSpecBuilder <span class="token operator">-&gt;</span> msgBodyPropsSpecBuilder
                                <span class="token punctuation">.</span><span class="token function">withEncryptionType</span><span class="token punctuation">(</span><span class="token number">0b000</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">withSubPackage</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">withReversedBit14AndBit15</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">)</span>
                        <span class="token comment">// 终端ID</span>
                        <span class="token punctuation">.</span><span class="token function">withTerminalId</span><span class="token punctuation">(</span><span class="token string">&quot;13912344321&quot;</span><span class="token punctuation">)</span>
                        <span class="token comment">// 流水号</span>
                        <span class="token punctuation">.</span><span class="token function">withFlowId</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
                <span class="token comment">// 消息体</span>
                <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>msgBodyBuilder <span class="token operator">-&gt;</span> msgBodyBuilder
                        <span class="token punctuation">.</span><span class="token function">appendWord</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token comment">//省域 ID [WORD]</span>
                        <span class="token punctuation">.</span><span class="token function">appendWord</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">// 市县域 ID [WORD]</span>
                        <span class="token punctuation">.</span><span class="token function">appendBytes</span><span class="token punctuation">(</span><span class="token string">&quot;12359&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token constant">CHARSET</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 制造商 ID [BYTE[5]]</span>
                        <span class="token punctuation">.</span><span class="token function">appendBytes</span><span class="token punctuation">(</span><span class="token string">&quot;12345678901234567890&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token constant">CHARSET</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 终端型号 [BYTE[20]]</span>
                        <span class="token punctuation">.</span><span class="token function">appendBytes</span><span class="token punctuation">(</span><span class="token string">&quot;id12345&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token constant">CHARSET</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 终端 ID [BYTE[7]]</span>
                        <span class="token punctuation">.</span><span class="token function">appendByte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 车牌颜色 [BYTE]</span>
                        <span class="token punctuation">.</span><span class="token function">appendString</span><span class="token punctuation">(</span><span class="token string">&quot;13160466666&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">HexStringUtils</span><span class="token punctuation">.</span><span class="token function">bytes2HexString</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">HexStringUtils</span><span class="token punctuation">.</span><span class="token function">bytes2HexString</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBuildQueryTerminalProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token class-name">Jt808MsgBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span>jt808MsgHeaderBuilder <span class="token operator">-&gt;</span> jt808MsgHeaderBuilder
                        <span class="token punctuation">.</span><span class="token function">withMsgId</span><span class="token punctuation">(</span><span class="token number">0x0107</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">withMsgBodyPropsSpec</span><span class="token punctuation">(</span>msgBodyPropsSpecBuilder <span class="token operator">-&gt;</span> msgBodyPropsSpecBuilder
                                <span class="token punctuation">.</span><span class="token function">withEncryptionType</span><span class="token punctuation">(</span><span class="token number">0b000</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">withSubPackage</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">withReversedBit14AndBit15</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">withTerminalId</span><span class="token punctuation">(</span><span class="token string">&quot;13912344321&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">withFlowId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>messageBuilder <span class="token operator">-&gt;</span> messageBuilder
                        <span class="token punctuation">.</span><span class="token function">appendWord</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">appendBytes</span><span class="token punctuation">(</span><span class="token string">&quot;12345&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token constant">CHARSET</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">HexStringUtils</span><span class="token punctuation">.</span><span class="token function">bytes2HexString</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),o=[c];function e(u,i){return s(),a("div",null,o)}const d=n(p,[["render",e],["__file","msg-builder.html.vue"]]);export{d as default};
